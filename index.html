<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yannan's Portfolio</title>
  <link rel="stylesheet" href="style.css">
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
/* Responsive layout for droplet game */
.droplet-game-flex {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1em;
}
@media (max-width: 600px) {
  .droplet-game-flex {
    flex-direction: column;
    align-items: stretch;
    gap: 0.5em;
  }
  #droplet-game-canvas {
    width: 100% !important;
    max-width: 100vw;
    height: auto !important;
    min-width: 0;
  }
  #droplet-reset-btn {
    width: 100%;
    margin-top: 0.5em;
    align-self: stretch;
  }
}
@media (min-width: 601px) {
  #droplet-game-canvas {
    width: 320px;
    height: 400px;
  }
}
#droplet-game-canvas {
  max-width: 100%;
  box-sizing: border-box;
}
.droplet-charity-branding {
  background: #e3f2fd;
  border-radius: 8px;
  padding: 0.5em 1em;
  margin-bottom: 1em;
  box-shadow: 0 2px 8px rgba(33,150,243,0.07);
}
</style>
</head>
<body>
  <!-- Site header -->
  <header class="site-header">
  <img src="img/Screenshot 2025-05-29 163824.png" alt="Intel Logo" class="intel-logo" />
    <h1>Yannan's Portfolio</h1>
    <p class="site-bio">
      Illinois Institute of Technology is a leading research university in Chicago, known for its innovation, diversity, and commitment to student success.
    </p>
  </header>
  <!-- Navigation Menu -->
  <nav class="main-nav">
    <ul>
      <li><a href="#home"><i class="fa-solid fa-house"></i> Home</a></li>
      <li><a href="#about"><i class="fa-solid fa-magnifying-glass"></i> About</a></li>
      <li><a href="#college-life"><i class="fa-solid fa-book"></i> College Life</a></li>
      <li><a href="#contact"><i class="fa-solid fa-map"></i> Contact</a></li>
      <li><a href="#new-game-section-ocean"><i class="fa-solid fa-gamepad"></i> A New Game by Yannan He</a></li>
    </ul>
  </nav>
  <!-- Call-to-Action Banner -->
  <section id="home" class="cta-banner" style="background-image: url('img/66324e486200c36002784fe2_1702348628_en-idei-club-p-best-office-pictures-dizain-krasivo-64.jpg');">
    <div class="cta-overlay"></div>
    <div class="cta-content">
      <h2>Discover College Life with Yannan He!</h2>
      <p>
        College life is a journey of growth, learning, and new experiences. From attending classes and making friends to balancing studies and fun, every day brings something new. Dive in and see what makes college life so unique!
      </p>
      <a href="#college-life" class="cta-button">Explore College Life</a>
    </div>
  </section>

  <!-- Features Section: Explore More -->
  <section class="features-section py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-4">Explore More</h2>
      <div class="row text-center">
        <div class="col-md-4 mb-4">
          <div class="p-4 border rounded h-100">
            <i class="fa-solid fa-robot fa-2x mb-3 text-primary"></i>
            <h4>Robotics</h4>
            <p>Discover how robotics is shaping the future of engineering and innovation.</p>
            <a href="#robotics" class="btn btn-outline-primary mt-2">Learn More</a>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="p-4 border rounded h-100">
            <i class="fa-solid fa-people-group fa-2x mb-3 text-success"></i>
            <h4>Student Life</h4>
            <p>Engage in campus activities, clubs, and events that enrich your college experience.</p>
            <a href="#student-life" class="btn btn-outline-success mt-2">Learn More</a>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="p-4 border rounded h-100">
            <i class="fa-solid fa-briefcase fa-2x mb-3 text-warning"></i>
            <h4>Career Prep</h4>
            <p>Get ready for your future with internships, resume help, and career fairs.</p>
            <a href="#career" class="btn btn-outline-warning mt-2">Learn More</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Responsive Three-Column Section -->
  <section class="container my-5" aria-label="Highlights">
    <div class="row text-center g-4">
      <div class="col-md-4">
        <div class="p-4 h-100 bg-white rounded-3 shadow-sm">
          <h3>
            <i class="fa-solid fa-robot heading-icon" aria-hidden="true"></i>
            Robotics
          </h3>
          <p>Hands-on robotics projects foster creativity and teamwork in engineering students.</p>
          <a href="#robotics" class="learn-more-btn" aria-label="Learn more about Robotics">Learn More</a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-4 h-100 bg-white rounded-3 shadow-sm">
          <h3>
            <i class="fa-solid fa-users heading-icon" aria-hidden="true"></i>
            Community
          </h3>
          <p>Engage with a vibrant campus community through clubs, events, and volunteering.</p>
          <a href="#community" class="learn-more-btn" aria-label="Learn more about Community">Learn More</a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-4 h-100 bg-white rounded-3 shadow-sm">
          <h3>
            <i class="fa-solid fa-award heading-icon" aria-hidden="true"></i>
            Achievements
          </h3>
          <p>Celebrate academic and extracurricular achievements throughout your college journey.</p>
          <a href="#achievements" class="learn-more-btn" aria-label="Learn more about Achievements">Learn More</a>
        </div>
      </div>
    </div>
  </section>
   <section id="about" class="about-section">
    <h2>About</h2>
    <p>
      Pursuing a degree in Mechanical Engineering can be both rewarding and challenging. College students in this major often face a demanding workload, balancing complex coursework, hands-on labs, and group projects. The pressure to master technical concepts, meet tight deadlines, and prepare for a competitive job market can be overwhelming. Despite these struggles, the journey builds resilience, problem-solving skills, and a strong sense of accomplishment that prepares students for a successful engineering career.
    </p>
  </section><!-- Two-column info section -->
  <section id="college-life" class="info-section">
    <div class="info-img">
      <img src="img/1740945079112.jpg" alt="Portrait of Yannan He, Mechanical Engineering student" />
    </div>
    <div class="info-text">
      <h3>College Students Making a Difference</h3>
      <p>
        College students like Yannan He balance academics, personal growth, and community involvement. Their energy and compassion help shape a brighter future, whether through campus activities, volunteering, or supporting peers. Every small action countsâ€”get involved and make your mark!
      </p>
    </div>
  </section>
  <!-- Timeline/Milestones Section -->
  <section class="timeline-section" aria-label="Milestones Timeline">
    <button class="cancel-scroll-btn" style="display:none;">
      Cancel <span class="cancel-scroll-note">automated horizontal sliding</span>
    </button>
    <div class="timeline-fade-overlay"></div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1513258496099-48168024aec0?auto=format&fit=crop&w=400&q=80" alt="Started College" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2019</div>
        <h4>Started College</h4>
      </div>
      <div class="timeline-details">
        <p>Began studies at Illinois Institute of Technology, majoring in Mechanical Engineering.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80" alt="First Internship" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2020</div>
        <h4>First Internship</h4>
      </div>
      <div class="timeline-details">
        <p>Completed a summer internship, gaining hands-on engineering experience.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="Research Project" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2021</div>
        <h4>Research Project</h4>
      </div>
      <div class="timeline-details">
        <p>Joined a research group and contributed to a robotics project on campus.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="Leadership Role" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2022</div>
        <h4>Leadership Role</h4>
      </div>
      <div class="timeline-details">
        <p>Became president of the Engineering Club, organizing events and workshops.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Graduation" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2023</div>
        <h4>Graduation</h4>
      </div>
      <div class="timeline-details">
        <p>Graduated with honors and prepared for a career in engineering.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=400&q=80" alt="First Job" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2024</div>
        <h4>First Job</h4>
      </div>
      <div class="timeline-details">
        <p>Started first job as a mechanical engineer at a leading tech company.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Patent Awarded" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2025</div>
        <h4>Patent Awarded</h4>
      </div>
      <div class="timeline-details">
        <p>Received a patent for an innovative mechanical design.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Conference Speaker" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2026</div>
        <h4>Conference Speaker</h4>
      </div>
      <div class="timeline-details">
        <p>Invited to speak at an international engineering conference.</p>
      </div>
    </div>
    <div class="timeline-event">
      <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80" alt="Mentoring" class="timeline-img" />
      <div class="timeline-front">
        <div class="timeline-date">2027</div>
        <h4>Mentoring</h4>
      </div>
      <div class="timeline-details">
        <p>Began mentoring new students and young engineers in the field.</p>
      </div>
    </div>
  </section>
  <section id="contact" class="contact-section">
    <h2>Contact</h2>
    <ul>
      <li><strong>Phone:</strong> (312) 555-0198</li>
      <li><strong>Address:</strong> 3300 S Federal St, Chicago, IL 60616</li>
      <li><strong>Post Office:</strong> PO Box 12345, Chicago, IL 60616</li>
    </ul>
  </section>

  <!-- Bootstrap Modal Example -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#aboutModal" style="margin: 2em auto; display: block;">
    <i class="fa-solid fa-circle-info heading-icon"></i> Learn More About Yannan
  </button>
  <div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-modal="true" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="aboutModalLabel">About Yannan He</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" tabindex="0"></button>
        </div>
        <div class="modal-body">
          <p>
            Yannan He is a dedicated Mechanical Engineering student at Illinois Institute of Technology, passionate about robotics, innovation, and making a positive impact in the engineering community.
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Carousel Example -->
  <div id="portfolioCarousel" class="carousel slide" data-bs-ride="carousel" style="max-width:600px;margin:2em auto;">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#portfolioCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#portfolioCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#portfolioCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="img/1740945079112.jpg" class="d-block w-100" alt="Yannan He presenting a robotics project">
        <div class="carousel-caption d-none d-md-block">
          <h5>Robotics Project</h5>
          <p>Yannan presenting at the annual engineering expo.</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="img/Screenshot 2025-05-29 163824.png" class="d-block w-100" alt="Intel logo at Illinois Institute of Technology event">
        <div class="carousel-caption d-none d-md-block">
          <h5>Industry Collaboration</h5>
          <p>Partnering with leading tech companies for innovation.</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=600&q=80" class="d-block w-100" alt="Team of students collaborating on engineering design">
        <div class="carousel-caption d-none d-md-block">
          <h5>Teamwork</h5>
          <p>Collaborating with peers on challenging projects.</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#portfolioCarousel" data-bs-slide="prev" aria-label="Previous Slide">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#portfolioCarousel" data-bs-slide="next" aria-label="Next Slide">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>
  </div>

  <!-- Bootstrap Accordion Example -->
  <div class="accordion" id="faqAccordion" style="max-width:600px;margin:2em auto;">
    <div class="accordion-item">
      <h2 class="accordion-header" id="faqHeadingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseOne" aria-expanded="true" aria-controls="faqCollapseOne">
          <i class="fa-solid fa-question-circle heading-icon"></i> What is Mechanical Engineering?
        </button>
      </h2>
      <div id="faqCollapseOne" class="accordion-collapse collapse show" aria-labelledby="faqHeadingOne" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Mechanical Engineering is a discipline that applies engineering, physics, and materials science principles to design, analyze, manufacture, and maintain mechanical systems.
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header" id="faqHeadingTwo">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseTwo" aria-expanded="false" aria-controls="faqCollapseTwo">
          <i class="fa-solid fa-clock heading-icon"></i> How do you balance studies and activities?
        </button>
      </h2>
      <div id="faqCollapseTwo" class="accordion-collapse collapse" aria-labelledby="faqHeadingTwo" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Time management, prioritization, and staying organized are key to balancing coursework, extracurriculars, and personal life.
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header" id="faqHeadingThree">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseThree" aria-expanded="false" aria-controls="faqCollapseThree">
          <i class="fa-solid fa-lightbulb heading-icon"></i> Tips for new engineering students?
        </button>
      </h2>
      <div id="faqCollapseThree" class="accordion-collapse collapse" aria-labelledby="faqHeadingThree" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Get involved, ask questions, seek help early, and embrace hands-on learning opportunities.
        </div>
      </div>
    </div>
  </div>

  <!-- Subscription Form -->
  <form class="subscription-form" aria-label="Subscribe to newsletter">
    <label for="subscribe-email">Subscribe for updates:</label>
    <input type="email" id="subscribe-email" name="email" placeholder="Enter your email address" required aria-required="true" autocomplete="email">
    <button type="submit" class="subscribe-btn" aria-label="Subscribe to newsletter">
      <i class="fa-solid fa-envelope"></i> Subscribe
    </button>
  </form>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <div>
      &copy; 2024 Yannan He. All rights reserved.
      <span class="visually-hidden">End of site content.</span>
    </div>
    <div>
      <a href="#home">Back to top</a>
    </div>
  </footer>

  <!-- New Game Section with Ocean Background -->
  <section id="new-game-section-ocean" class="new-game-section-ocean">
    <div class="ocean-bg">
      <svg class="ocean-waves" viewBox="0 0 1440 320"><path fill="#0099ff" fill-opacity="0.4" d="M0,160L60,170.7C120,181,240,203,360,197.3C480,192,600,160,720,154.7C840,149,960,171,1080,181.3C1200,192,1320,192,1380,192L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
      <div class="new-game-content">
        <div class="droplet-charity-branding" style="display:flex;align-items:center;justify-content:center;gap:0.7em;margin-bottom:0.7em;">
          <span style="font-size:2em;color:#2196f3;"><i class="fa-solid fa-droplet"></i></span>
          <span style="font-weight:bold;font-size:1.1em;color:#1565c0;">Supporting Clean Water Initiatives</span>
          <a href="https://www.charitywater.org/" target="_blank" rel="noopener" style="color:#2196f3;text-decoration:underline;font-size:0.98em;">charity: water</a>
        </div>
        <div id="droplet-game-ui" style="display:none; margin-bottom: 1em; text-align:center;">
          <div style="margin-bottom:0.5em;">
            <span id="droplet-score-label" style="font-size:1.2em;font-weight:bold;">Score: 0/100</span>
          </div>
          <div style="width:80%;margin:0 auto 0.5em auto;">
            <div style="background:#eee;border-radius:10px;height:20px;overflow:hidden;">
              <div id="droplet-gauge" style="background:#2196f3;height:100%;width:0%;transition:width 0.3s;"></div>
            </div>
          </div>
          <div style="margin-bottom:0.5em;">
            <span id="droplet-level-label" style="font-size:1em;">Level: 1</span>
          </div>
        </div>
        <div class="droplet-game-flex">
          <canvas id="droplet-game-canvas" width="320" height="400" style="display:none;background:linear-gradient(to bottom,#b3e0ff 60%,#e0f7fa 100%);border-radius:10px;margin-bottom:1em;"></canvas>
          <div class="droplet-instructions" style="min-width:140px;max-width:200px;background:#e3f2fd;border-radius:8px;padding:0.7em 1em;font-size:0.98em;color:#1565c0;box-shadow:0 2px 8px rgba(33,150,243,0.07);margin-bottom:1em;">
            <strong>How to Play:</strong>
            <ul style="padding-left:1.1em;margin:0 0 0.2em 0;">
              <li><span style="color:#2196f3;font-weight:bold;">Blue droplet</span>: +20 points</li>
              <li><span style="color:#222;font-weight:bold;">Black droplet</span>: -30 points</li>
              <li>Reach 100 points to <b>level up</b></li>
              <li>Reach <b>Level 3</b> to win!</li>
              <li>If score hits 0 after a black droplet, you lose</li>
            </ul>
          </div>
          <button id="droplet-reset-btn" class="btn btn-secondary" style="display:none;height:40px;align-self:flex-start;margin-top:10px;">Reset</button>
        </div>
        <h2>A New Game by Yannan He</h2>
        <p>Try my latest creation! Click start to play below.</p>
        <button id="new-game-start-btn" class="btn btn-lg btn-primary">Start</button>
      </div>
    </div>
  </section>
  <div id="droplet-float-msg" style="position:fixed;top:18px;left:18px;z-index:1000;font-size:1.5em;font-weight:bold;color:#2196f3;opacity:0;pointer-events:none;transition:opacity 0.4s;"></div>
  <script>
  // Droplet Game Implementation
  (function() {
    const startBtn = document.getElementById('new-game-start-btn');
    const canvas = document.getElementById('droplet-game-canvas');
    const ctx = canvas.getContext('2d');
    const ui = document.getElementById('droplet-game-ui');
    const scoreLabel = document.getElementById('droplet-score-label');
    const gauge = document.getElementById('droplet-gauge');
    const levelLabel = document.getElementById('droplet-level-label');
    const resetBtn = document.getElementById('droplet-reset-btn');

    let running = false;
    let score = 0;
    let level = 1;
    let droplets = [];
    let dropletSpeed = 2;
    let dropletInterval = 1200;
    let dropletTimer = 0;
    let animationId = null;
    let maxScore = 100;
    let gameOver = false;

    function resetGame() {
      score = 0;
      level = 1;
      droplets = [];
      dropletSpeed = 2;
      dropletInterval = 1200;
      dropletTimer = 0;
      gameOver = false;
      updateUI();
    }

    function updateUI() {
      scoreLabel.textContent = `Score: ${score}/100`;
      gauge.style.width = `${Math.min(100, Math.round(score))}%`;
      levelLabel.textContent = `Level: ${level}`;
    }

    function spawnDroplet() {
      // 70% blue, 30% black
      const isBlue = Math.random() < 0.7;
      const color = isBlue ? '#2196f3' : '#222';
      const type = isBlue ? 'blue' : 'black';
      const x = 20 + Math.random() * (canvas.width - 40);
      droplets.push({ x, y: -20, r: 18, color, type });
    }

    function drawDroplets() {
      for (const d of droplets) {
        ctx.beginPath();
        ctx.arc(d.x, d.y, d.r, 0, 2 * Math.PI);
        ctx.fillStyle = d.color;
        ctx.shadowColor = d.type === 'blue' ? '#90caf9' : '#888';
        ctx.shadowBlur = 8;
        ctx.fill();
        ctx.shadowBlur = 0;
        // Add a white highlight for blue droplets
        if (d.type === 'blue') {
          ctx.beginPath();
          ctx.arc(d.x - 6, d.y - 6, 5, 0, 2 * Math.PI);
          ctx.fillStyle = 'rgba(255,255,255,0.5)';
          ctx.fill();
        }
      }
    }

    function updateDroplets() {
      for (const d of droplets) {
        d.y += dropletSpeed;
      }
      // Remove off-screen droplets
      droplets = droplets.filter(d => d.y < canvas.height + 30);
    }

    function checkLevelUp() {
      if (score >= 100 && level < 3) {
        level++;
        score = 0;
        dropletSpeed += 1.2;
        dropletInterval = Math.max(500, dropletInterval - 300);
        showMessage(`Level Up! Level ${level}`);
        updateUI();
        if (level === 3) {
          endGame(true);
        }
      }
    }

    function showMessage(msg) {
      ctx.save();
      ctx.font = 'bold 28px sans-serif';
      ctx.fillStyle = '#fff';
      ctx.strokeStyle = '#2196f3';
      ctx.lineWidth = 4;
      ctx.textAlign = 'center';
      ctx.strokeText(msg, canvas.width/2, canvas.height/2);
      ctx.fillText(msg, canvas.width/2, canvas.height/2);
      ctx.restore();
    }

    function drawConfetti() {
      const confettiColors = ['#f44336','#ffeb3b','#4caf50','#2196f3','#ff9800','#9c27b0'];
      for (const c of confettiArray) {
        ctx.save();
        ctx.translate(c.x, c.y);
        ctx.rotate(c.angle);
        ctx.fillStyle = c.color;
        ctx.fillRect(-c.size/2, -c.size/2, c.size, c.size*1.5);
        ctx.restore();
      }
    }
    function drawSkulls() {
      for (const s of skullArray) {
        ctx.save();
        ctx.translate(s.x, s.y);
        ctx.scale(s.size/32, s.size/32);
        // Draw a simple skull
        ctx.beginPath();
        ctx.arc(16, 16, 14, 0, 2*Math.PI); // head
        ctx.fillStyle = '#222';
        ctx.fill();
        ctx.beginPath();
        ctx.arc(10, 16, 3, 0, 2*Math.PI); // left eye
        ctx.arc(22, 16, 3, 0, 2*Math.PI); // right eye
        ctx.fillStyle = '#fff';
        ctx.fill();
        ctx.beginPath();
        ctx.arc(10, 16, 1.2, 0, 2*Math.PI); // left pupil
        ctx.arc(22, 16, 1.2, 0, 2*Math.PI); // right pupil
        ctx.fillStyle = '#222';
        ctx.fill();
        ctx.beginPath();
        ctx.ellipse(16, 25, 4, 2, 0, 0, Math.PI*2); // mouth
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 1.2;
        ctx.stroke();
        ctx.restore();
      }
    }
    let confettiArray = [];
    let skullArray = [];
    function animateConfetti() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawConfetti();
      for (const c of confettiArray) {
        c.y += c.speed;
        c.x += Math.sin(c.y/20 + c.offset) * 1.2;
        c.angle += c.spin;
      }
      confettiArray = confettiArray.filter(c => c.y < canvas.height + 20);
      if (confettiArray.length > 0) {
        requestAnimationFrame(animateConfetti);
      }
    }
    function animateSkulls() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawSkulls();
      for (const s of skullArray) {
        s.y += s.speed;
        s.x += Math.sin(s.y/18 + s.offset) * 1.1;
      }
      skullArray = skullArray.filter(s => s.y < canvas.height + 32);
      if (skullArray.length > 0) {
        requestAnimationFrame(animateSkulls);
      }
    }
    function launchConfetti() {
      confettiArray = [];
      for (let i=0; i<40; i++) {
        confettiArray.push({
          x: Math.random()*canvas.width,
          y: -20-Math.random()*40,
          size: 8+Math.random()*8,
          color: ['#f44336','#ffeb3b','#4caf50','#2196f3','#ff9800','#9c27b0'][Math.floor(Math.random()*6)],
          speed: 2+Math.random()*2,
          angle: Math.random()*Math.PI*2,
          spin: (Math.random()-0.5)*0.2,
          offset: Math.random()*10
        });
      }
      animateConfetti();
    }
    function launchSkulls() {
      skullArray = [];
      for (let i=0; i<18; i++) {
        skullArray.push({
          x: Math.random()*canvas.width,
          y: -32-Math.random()*40,
          size: 24+Math.random()*16,
          speed: 2+Math.random()*1.5,
          offset: Math.random()*10
        });
      }
      animateSkulls();
    }
    function endGame(won) {
      running = false;
      gameOver = true;
      setTimeout(() => {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        showMessage(won ? 'You Win! ðŸŽ‰' : 'Game Over');
        setTimeout(() => {
          if (won) {
            launchConfetti();
          } else {
            launchSkulls();
          }
          setTimeout(() => {
            hideGameUI();
            startBtn.style.display = '';
            startBtn.textContent = 'Restart';
          }, 1800);
        }, 900);
      }, 300);
    }

    function gameLoop(ts) {
      if (!running) return;
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawDroplets();
      updateDroplets();
      dropletTimer += 16;
      if (dropletTimer > dropletInterval) {
        spawnDroplet();
        dropletTimer = 0;
      }
      animationId = requestAnimationFrame(gameLoop);
    }

    function getDropletAt(x, y) {
      for (let i = droplets.length - 1; i >= 0; i--) {
        const d = droplets[i];
        const dx = x - d.x;
        const dy = y - d.y;
        if (dx*dx + dy*dy <= d.r*d.r) {
          return { droplet: d, index: i };
        }
      }
      return null;
    }

    canvas.addEventListener('click', function(e) {
      if (!running) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX - rect.left) * (canvas.width / rect.width);
      const y = (e.clientY - rect.top) * (canvas.height / rect.height);
      const hit = getDropletAt(x, y);
      if (hit) {
        showFloatMsg(hit.droplet.type === 'blue' ? 'nice' : 'nooo', hit.droplet.type === 'blue');
        if (hit.droplet.type === 'blue') {
          score = Math.min(100, score + 20);
        } else {
          score = Math.max(0, score - 30);
          if (score === 0) {
            endGame(false);
          }
        }
        droplets.splice(hit.index, 1);
        updateUI();
        checkLevelUp();
      }
    });
    function showFloatMsg(msg, isBlue) {
      const el = document.getElementById('droplet-float-msg');
      el.textContent = msg;
      el.style.color = isBlue ? '#2196f3' : '#b71c1c';
      el.style.opacity = '1';
      clearTimeout(el._hideTimer);
      el._hideTimer = setTimeout(() => {
        el.style.opacity = '0';
      }, 900);
    }
    function showGameUI() {
      ui.style.display = '';
      canvas.style.display = '';
      resetBtn.style.display = '';
    }
    function hideGameUI() {
      ui.style.display = 'none';
      canvas.style.display = 'none';
      resetBtn.style.display = 'none';
    }

    function resetGameAndStart() {
      resetGame();
      showGameUI();
      running = true;
      animationId && cancelAnimationFrame(animationId);
      animationId = requestAnimationFrame(gameLoop);
    }

    startBtn.addEventListener('click', function() {
      resetGameAndStart();
      startBtn.style.display = 'none';
    });
    resetBtn.addEventListener('click', function() {
      resetGameAndStart();
    });
  })();
  </script>
</body>
</html>